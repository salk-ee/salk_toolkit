---
description: How to write and implement specifications
globs: specs/**
alwaysApply: false
---

# Spec Management System

## File Organization

- **Location**: `specs/{DEV|TOOL}-{number}-{description}.md`
- **Discovery**: `ls specs/*.md` or search: `grep -r "feature" specs/`

## Verbs

There are four main things user can ask for regarding specs.
If they do, read the relevant rules for best practices

- **Create** a spec - [spec_create.mdc](mdc:.cursor/rules/spec_verbs/spec_create.mdc)
- **Review** a spec before implementation - [spec_review.mdc](mdc:.cursor/rules/spec_verbs/spec_review.mdc)
- **Implement** a feature according to a spec - [spec_implement.mdc](mdc:.cursor/rules/spec_verbs/spec_implement.mdc) 
- **Validate** that feature has been built to spec - [spec_validate.mdc](mdc:.cursor/rules/spec_verbs/spec_validate.mdc) 

## Component best practices

Always follow the rules set for the specific domain
- **Data annotations**: [data_annotations.mdc](mdc:.cursor/rules/data_annotations.mdc)
- **Plotting**: [plot_pipeline.mdc](mdc:.cursor/rules/plot_pipeline.mdc)
- **Dashboard**: [dashboard.mdc](mdc:.cursor/rules/dashboard.mdc)
- **Tools**: [tools.mdc](mdc:.cursor/rules/tools.mdc)
  - Specs for tools start with TOOL instead of DEV

## Spec format
- Prefer short concise bullet-points and sub-points over long winding sentences
- The more structure, the better. Feel free to add subheadings and sub-subheadings if warranted
- DO NOT add date/time to individual changes unless a month+ has passed since last update
  - In that case, create a separate **Changelog** heading to the end

## Spec Structure Template

```markdown
# DEV-XXX: Title

**Last Updated**: YYYY-MM-DD
**Status**: üöß Planning | ‚è≥ In Progress | ‚úÖ Complete
**Module**: Annotations | Plotting | Dashboard | Tool
**Tags**: `#feature`, `#pattern`, `#tech`
**Dependencies**: {DEV|TOOL}-YYY (or None)

## Overview

What and why in 2-3 sentences.

## Problem Context

- Problem being solved
- Intended use cases
  - Use case 1
  - Use case 2
- Technical constraints and requirements
  - Constraint 1
  - Constraint 2
- Integration points with existing systems
  - IP 1
  - IP 2

## Requirements

**Relevant rules files and documentation**
- @salk_toolkit.mdc for whole-project rules
- ...

**Important context functions/files**
- Functions that this implementation relies on heavily - with filenames and row numbers

**Files to Create/Modify:**

- Existing functions that need to be modified
  - With file names and row numbers
- New files being created

**Functionality:**

- Core functional requirements
- Technical implementation details
- Integration points and constraints

**Architecture:**

- Architectural notes and patterns to adhere to

## Implementation Plan

### Foundation Setup

- [ ] Pydantic data model changes ‚Ä¶

### Core Development

- [ ] Change 1 ‚Ä¶
- [ ] Change 2 ‚Ä¶

### Integration & Testing

- [ ] Test cases to cover

## Definition of Done

- [ ] All files created/updated
- [ ] Tests passing (unit + e2e)
- [ ] Feature working e2e
- [ ] Follows established patterns

## Implementation Notes

Track decisions and pattern deviations as you work.
```
