---
description: Important context about the project
globs: **/*.*
---

# Salk Toolkit

Set of tools to help in analysing and visualizing polling data

# File organization

- **location**: nbs/{number}_{module}.ipynb. For instance, "glm" refers to nbs/02_glm.ipynb
- **nbdev**: the .py files in salk_toolkit folder are autogenerated from the corresponding notebooks. Do not edit them!
- **tools**: Exceptions to this are tools like explorer.py that do not have a corresponding notebook
- **utils**: Module utils is there for shared small utility functions.

## Library description

**Domain**: Polling data analysis and visualization
**Main Functions**:
- **Data annotation**: a json-based data annotation language for survey data
  - Modules 01_io (code) and 06_validation (pydantic model)
  - Main function: read_and_process_data in 01_io
  - If working on that, follow [data_annotations.mdc](mdc:.cursor/rules/data_annotations.mdc).
- **Plotting**: an efficient plotting framework on large datasets
  - Modules 02_pp (plot pipeline) and 03_plots (Altair plot code for pipleine)
    - Other related files: explorer.py, 04_election_models
  - Main function: e2e_plot in 02_pp
  - If working on that, follow [plot_pipeline.mdc](mdc:.cursor/rules/plot_pipeline.mdc).
- **Dashboards**: a streamlit-based dashboard framework integrated with plotting pipeline
  - Module 05_dashboard (framework for easy semi-standardized dashboards with translation and login)
  - Main class: SalkDashboardBuilder
  - If working on that, follow [dashboard.mdc](mdc:.cursor/rules/dashboard.mdc).

## Conventions

- **tests**: all new functionalities should be covered by tests!
  - For writing tests, follow rules described in [testing.mdc](mdc:.cursor/rules/testing.mdc).

- **utility functions**: generic, small and multi-purpose utility functions go to utils module
  - Always check that module for a function before writing your own

